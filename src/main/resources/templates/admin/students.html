<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Dashboard - Brand</title>
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="/assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/fonts/material-icons.min.css">
    <link rel="stylesheet" href="/assets/fonts/fontawesome5-overrides.min.css">
    <link rel="stylesheet" href="/assets/css/Contact-Form-Clean.css">
    <link rel="stylesheet" href="/assets/css/Dark-Mode-Switch.css">
    <link rel="stylesheet" href="/assets/css/List-item.css">
    <link rel="stylesheet" href="/assets/css/OnOff-Switch-with-Text.css">
    <link rel="stylesheet" href="/assets/css/Toggle-Switch-1.css">
    <link rel="stylesheet" href="/assets/css/Toggle-Switch.css">
</head>

<body id="page-top" style="color: rgb(71,90,231);">
<div id="wrapper">
    <nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0"
         style="color: rgb(133, 135, 150);background: #506ab5;width: 307px;text-align: center;">
        <div class="container-fluid d-flex flex-column p-0">
            <hr class="sidebar-divider my-0">
            <a href="#"><img style="height: 87px;margin: 0 0 0 -2%;" src="/assets/img/Last%20UZ%20White.png"></a>
            <ul class="navbar-nav text-light" id="accordionSidebar">
                <li class="nav-item"><a class="nav-link" th:href="@{/admin/allTests}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"
                         fill="currentColor" class="bi bi-list-nested" style="margin: 0 8% 0 0;">
                        <path fill-rule="evenodd"
                              d="M4.5 11.5A.5.5 0 0 1 5 11h10a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm-2-4A.5.5 0 0 1 1 3h10a.5.5 0 0 1 0 1H1a.5.5 0 0 1-.5-.5z"></path>
                    </svg>
                    <span>Barcha testlar</span></a></li>
                <li class="nav-item"></li>
                <li class="nav-item"><a class="nav-link " th:href="@{/admin/results}"><i
                        class="fas fa-table"
                        style="margin: 0 8% 0 0;"></i><span>Natijalar</span></a><a
                        class="nav-link" th:href="@{/admin/groups}"><i class="fa fa-group"
                                                                       style="margin: 0 8% 0 0;"></i><span>Guruhlar</span></a><a
                        class="nav-link" th:href="@{/admin/teachers}"><i class="fas fa-chalkboard-teacher"
                                                                         style="margin: 0 8% 0 0;"></i><span>O'qituvchilar</span></a><a
                        class="nav-link active" th:href="@{/admin/students}"><i class="fas fa-user-graduate"
                                                                                style="margin: 0 8% 0 0;"></i><span>Tinglovchilar</span></a><a
                        class="nav-link" th:href="@{/admin/profile}"><i class="material-icons"
                                                                        style="margin: 0 8% 0 0;">account_circle</i><span>Profile</span></a>
                </li>
                <li class="nav-item"></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/auth/logout}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none"
                         style="margin: 0 8% 0 0;">
                        <path d="M17 16L21 12M21 12L17 8M21 12L7 12M13 16V17C13 18.6569 11.6569 20 10 20H6C4.34315 20 3 18.6569 3 17V7C3 5.34315 4.34315 4 6 4H10C11.6569 4 13 5.34315 13 7V8"
                              stroke="currentColor" stroke-width="2" stroke-linecap="round"
                              stroke-linejoin="round"></path>
                    </svg>
                    <span>Akkountdan chiqish</span></a></li>
            </ul>
            <div class="text-center d-none d-md-inline">
                <button class="btn rounded-circle border-0" id="sidebarToggle" type="button"
                        style="background: rgb(156,192,248);color: rgb(0,0,0);"></button>
            </div>
        </div>
    </nav>
    <div class="d-flex flex-column" id="content-wrapper">
        <div id="content"
             style="background: #ffffff;padding: 0px;text-align: left;border-color: #eaf8ff;border-right-color: rgb(40,183,255);width: 100%;color: rgb(167,175,232);">
            <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top"
                 style="background: #506ab5;color: #971837;">
                <div class="container-fluid">
                    <button class="btn btn-link d-md-none rounded-circle me-3" id="sidebarToggleTop" type="button"><i
                            class="fas fa-bars"></i></button>
                    <form class="d-none d-sm-inline-block me-auto ms-md-3 my-2 my-md-0 mw-100 navbar-search" th:action="@{/search/admin/students/}">
                        <div class="input-group"><input class="bg-light form-control border-0 small" type="text" name="text"
                                                        placeholder="Qidirish">
                            <button class="btn btn-primary py-0" type="button"><i class="fas fa-search"></i></button>
                        </div>
                    </form>
                    <ul class="navbar-nav flex-nowrap ms-auto">
                        <li class="nav-item dropdown d-sm-none no-arrow"><a class="dropdown-toggle nav-link"
                                                                            aria-expanded="false"
                                                                            data-bs-toggle="dropdown" href="#"><i
                                class="fas fa-search"></i></a>
                            <div class="dropdown-menu dropdown-menu-end p-3 animated--grow-in"
                                 aria-labelledby="searchDropdown">
                                <form class="me-auto navbar-search w-100">
                                    <div class="input-group"><input class="bg-light form-control border-0 small"
                                                                    type="text" placeholder="Search for ...">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary py-0" type="button"><i
                                                    class="fas fa-search"></i></button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="row" style="width: 96%;margin-left: 2%;">
                <div class="col" style="padding: 0;">
                    <p style="text-align: left;margin: 0;">Tinglovchilar</p>
                </div>
                <div style="text-align: right;width: 50% !important;">
                    <div class="btn-group">
                        <button style="padding: 1vh !important;border-radius: 11px !important;margin-left: 2% !important;" class="btn btn-outline-success btn-sm dropdown-toggle" type="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false">
                            Guruh
                        </button>
                        <ul class="dropdown-menu">
                            <li class="fs-6"><a style="padding: 1vh !important;border-radius: 11px !important;margin-left: 2% !important;" class="dropdown-item" th:href="@{/admin/students/}">Barchasi</a></li>
                            <span th:each="group : ${groups}">
                <li class="fs-6"><a  th:text="${group}" class="dropdown-item"
                                    th:href="@{/admin/students/{groupName}(groupName=${group})}">Action</a></li>
                    </span>
                        </ul>
                    </div>
                    <div class="btn-group">
                        <button style="padding: 1vh !important;border-radius: 11px !important;margin-left: 2% !important;" class="btn btn-outline-success btn-sm dropdown-toggle" type="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false">
                            Holat
                        </button>
                        <ul class="dropdown-menu">
                            <li class="fs-6"><a class="dropdown-item" th:href="@{/admin/blockStudents}">Bloklash</a>
                            </li>
                            <li class="fs-6"><a class="dropdown-item" th:href="@{/admin/unBlockStudents}">Blokdan
                                ochish</a></li>
                            </span>
                        </ul>
                    </div>
                    <a style="padding: 1vh !important;border-radius: 11px !important;margin-left: 2% !important;" class="btn btn-outline-primary btn-sm" role="button" aria-disabled="true"
                       th:href="@{/admin/addStudent}"> + Tinglovchi qo'shish</a>
                    <a style="padding: 1vh !important;border-radius: 11px !important;margin-left: 2% !important;" class="btn btn-outline-primary btn-sm" role="button" aria-disabled="true"
                       th:href="@{/admin/addStudentFromExcel}"> + Tinglovchi exceldan yuklash</a></div>
            </div>
            <div class="table-responsive" style="width: 96%;margin-top: 2%;text-align: left;margin-left: 2%; height: 70vh">
                <div th:if="${error != null}">
                    <h1 style="width: 96%;margin: auto;margin-left: 2%;font-size: 23px;" th:text="${error}" >Korporativ
                        moliya va menejment</h1><br>
                </div>
                <table class="table" style="text-align: left">
                    <thead>
                    <tr>
                        <th style="width: 5%;">#</th>
                        <th style="width: 36%;">F.I.O.</th>
                        <th style="width: 20%;">Guruh nomi</th>
                        <th style="width: 27%;">Username</th>
                        <th style="width: 10%;text-align: center;">Status</th>
                        <th style="width: 10%;text-align: center;">O'chirish</th>
                        <th style="width: 10%;text-align: center;">Tahrirlash</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="student, iter : ${students}">
                        <td th:text="${iter.count}" >1</td>
                        <td th:text="${student.getFullName()}" >Alimov Baxodir</td>
                        <td th:text="${student.getGroupName()}" >Alimov Baxodir</td>
                        <td th:text="${student.getUsername()}" >alimov.b</td>
                        <td   style="text-align: center;"><label class="switch">
                            <input th:id="'checkbox' + ${iter.current}"
                                   th:name="${student.getId()}" th:checked="${student.isActive()}" type="checkbox">
                            <span class="slider round"></span>
                        </label></td>
                        <td style="text-align: center;"><a th:href="@{/admin/deleteStudent/{id}(id=${student.getId()})}"><i class="fa fa-trash-o"></i></a></td>
                        <td style="text-align: center;"><a th:href="@{/admin/editStudent/{id}(id=${student.getId()})}"><i class="fa fa-edit"></i></a></td>
                    </tr>
                    <tr></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <footer class="bg-white sticky-footer">
            <div class="container my-auto">
                <div class="text-center my-auto copyright"><span>SU Testing System © 2023</span></div>
            </div>
        </footer>
    </div>
    <a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
</div>
<script src="/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="/assets/js/theme.js"></script>
<script th:inline="javascript">
    // Checkboxlarni tanlash
    var checkboxes = document.querySelectorAll('input[type="checkbox"]');

    // Har bir checkbox uchun hodisani eslash
    checkboxes.forEach(function (checkbox) {
        checkbox.addEventListener('change', function () {
            doAction(this.name);
        });
    });

    // doAction() funksiyasi
    function doAction(name) {
        var xhr = new XMLHttpRequest();
        var url = '/admin/doActionStudent/' + name;

        xhr.open('GET', url, true);

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                var response = xhr.responseText;
                console.log(response);
            }
        };

        xhr.send();
    }

    // Checkbox o'zgarishlarini qabul qilish
    function handleCheckboxChange(checkbox) {
        doAction(checkbox.name);
    }

</script>
</body>

</html>